# ⚡ 時數顯示快速指南

**問題：** 排班時顯示的時數與實際設定不符  
**狀態：** ✅ 已修復  
**閱讀時間：** 1分鐘

---

## 🎯 修復內容

### 修復前 ❌
```
選擇任何單位都顯示：
醫師 160h / 護理師 180h / 其他 80h
（固定數值，不準確）
```

### 修復後 ✅
```
根據實際設定顯示：
本月剩餘：醫師 156h / 護理師 177h / 其他 80h
（實際配額 - 已用時數）

顏色指示：
🟢 綠色：充足（>20h）
🟡 黃色：注意（1-20h）
🔴 紅色：用完（0h）
```

---

## 🚀 立即測試

### 步驟1：重新整理
```
Ctrl+Shift+R 強制重新整理
```

### 步驟2：測試顯示
```
1. 到「✏️ 排班管理」
2. 點擊「➕ 新增排班」
3. 選擇日期（例如：2025-11-15）
4. 選擇事業單位
5. 查看時數顯示
```

### 步驟3：驗證準確性
```
查看控制台（F12 → Console）：

🔢 計算剩餘時數，事業單位：台北診所
📅 計算月份：11
📊 11月配額 - 醫生:160h, 護理師:180h, 其他:80h
⏱️ 11月已用 - 醫生:4h, 護理師:3h, 其他:0h
✅ 11月剩餘 - 醫生:156h, 護理師:177h, 其他:80h
```

---

## 📊 計算邏輯

```
剩餘時數 = 月度配額 - 當月已用

例如：
11月醫生配額：160小時
已排班消耗：4小時
顯示剩餘：156小時 ✓
```

---

## ⚠️ 重要提示

### 1. 人員名單要一致

```
✅ 正確：
事業單位設定：王醫師
排班選擇：王醫師

❌ 錯誤：
事業單位設定：王醫師
排班選擇：王醫生（名稱不同）
```

### 2. 必須設定月度配額

```
到「🏢 事業單位」頁籤：
1. 編輯事業單位
2. 填寫每月時數
3. 儲存

如果未設定 → 顯示 0h
```

### 3. 按月份分別計算

```
11月排班 → 計入11月配額
12月排班 → 計入12月配額
互不影響 ✓
```

---

## 🎨 顏色說明

| 顏色 | 剩餘時數 | 建議 |
|------|---------|------|
| 🟢 綠色 | > 20小時 | 可繼續排班 |
| 🟡 黃色 | 1-20小時 | 注意配額 |
| 🔴 紅色 | 0小時 | 已用完 |

---

## 📋 快速檢查

```
□ 重新整理網頁
□ 選擇日期
□ 選擇單位
□ 時數顯示正確
□ 顏色正確變化
□ F12 無紅色錯誤
```

---

## 💡 常見問題

**Q: 顯示 0h？**
```
A: 檢查該月是否有設定配額
   → 到事業單位頁籤編輯並設定
```

**Q: 已用時數不對？**
```
A: 檢查人員名單設定
   → 確保排班人員名稱與設定一致
```

**Q: 不同月份時數一樣？**
```
A: 每月配額可能設定相同
   → 可以為不同月份設定不同配額
```

---

**立即重新整理測試！** 🚀

**詳細說明：** 查看《時數顯示修復說明.md》

